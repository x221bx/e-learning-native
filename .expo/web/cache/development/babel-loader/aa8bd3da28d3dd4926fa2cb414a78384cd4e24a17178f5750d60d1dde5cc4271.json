{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  isGuest: false,\n  isAdmin: false,\n  enrolled: []\n};\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    loginSuccess(state, action) {\n      const user = action.payload || null;\n      state.user = user;\n      state.isAuthenticated = !!user;\n      state.isGuest = false;\n      state.isAdmin = Boolean(user?.role === 'admin');\n    },\n    registerSuccess(state, action) {\n      const user = action.payload || null;\n      state.user = user;\n      state.isAuthenticated = !!user;\n      state.isGuest = false;\n      state.isAdmin = Boolean(user?.role === 'admin');\n    },\n    continueAsGuest(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.isGuest = true;\n      state.isAdmin = false;\n    },\n    logout(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.isGuest = false;\n      state.isAdmin = false;\n      state.enrolled = [];\n    },\n    setAdmin(state, action) {\n      state.isAdmin = Boolean(action.payload);\n    },\n    updateProfile(state, action) {\n      const updates = action.payload || {};\n      state.user = _objectSpread(_objectSpread({}, state.user), updates);\n      if (updates?.role) state.isAdmin = Boolean(updates.role === 'admin');\n    },\n    joinCourse(state, action) {\n      const id = action.payload;\n      if (!state.enrolled.includes(id)) state.enrolled.push(id);\n    },\n    unjoinCourse(state, action) {\n      const id = action.payload;\n      state.enrolled = state.enrolled.filter(x => x !== id);\n    },\n    clearEnrollments(state) {\n      state.enrolled = [];\n    }\n  }\n});\nexport const {\n  loginSuccess,\n  registerSuccess,\n  continueAsGuest,\n  logout,\n  setAdmin,\n  updateProfile,\n  joinCourse,\n  unjoinCourse,\n  clearEnrollments\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","user","isAuthenticated","isGuest","isAdmin","enrolled","userSlice","name","reducers","loginSuccess","state","action","payload","Boolean","role","registerSuccess","continueAsGuest","logout","setAdmin","updateProfile","updates","_objectSpread","joinCourse","id","includes","push","unjoinCourse","filter","x","clearEnrollments","actions","reducer"],"sources":["/Users/mahmoudessam/Desktop/Qotoz/native-progect/e-learning-native/src/store/userSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\n// Basic user/auth state for local (mock) auth\n// Persist/restore in components (e.g., App.js) via AsyncStorage\nconst initialState = {\n  user: null,           // { id, name, email, avatar, role }\n  isAuthenticated: false,\n  isGuest: false,\n  isAdmin: false,\n  enrolled: [], // list of course IDs\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    loginSuccess(state, action) {\n      const user = action.payload || null;\n      state.user = user;\n      state.isAuthenticated = !!user;\n      state.isGuest = false;\n      state.isAdmin = Boolean(user?.role === 'admin');\n    },\n    registerSuccess(state, action) {\n      const user = action.payload || null;\n      state.user = user;\n      state.isAuthenticated = !!user;\n      state.isGuest = false;\n      state.isAdmin = Boolean(user?.role === 'admin');\n    },\n    continueAsGuest(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.isGuest = true;\n      state.isAdmin = false;\n    },\n    logout(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.isGuest = false;\n      state.isAdmin = false;\n      state.enrolled = [];\n    },\n\n    setAdmin(state, action) {\n      state.isAdmin = Boolean(action.payload);\n    },\n    updateProfile(state, action) {\n      const updates = action.payload || {};\n      state.user = { ...state.user, ...updates };\n      if (updates?.role) state.isAdmin = Boolean(updates.role === 'admin');\n    },\n\n    joinCourse(state, action) {\n      const id = action.payload;\n      if (!state.enrolled.includes(id)) state.enrolled.push(id);\n    },\n    unjoinCourse(state, action) {\n      const id = action.payload;\n      state.enrolled = state.enrolled.filter((x) => x !== id);\n    },\n    clearEnrollments(state) {\n      state.enrolled = [];\n    },\n  },\n});\n\nexport const { \n  loginSuccess, \n  registerSuccess, \n  continueAsGuest, \n  logout,\n  setAdmin, \n  updateProfile,\n  joinCourse, \n  unjoinCourse, \n  clearEnrollments \n} = userSlice.actions;\n\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}