{"ast":null,"code":"var _jsxFileName = \"/Users/mahmoudessam/Desktop/Qotoz/native-progect/e-learning-native/src/screens/SearchResultsScreen.js\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport theme from '../theme';\nimport { useColors } from '../theme/hooks';\nimport { t } from '../i18n';\nimport { CourseCardVertical } from '../components/CourseCard';\nimport { CoursesAPI } from '../services/api';\nimport config from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchResultsScreen({\n  route,\n  navigation\n}) {\n  const colors = useColors();\n  const query = route?.params?.query || '';\n  const category = route?.params?.category || '';\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const load = useCallback(async () => {\n    if (loading || !hasMore) return;\n    setLoading(true);\n    try {\n      const res = await CoursesAPI.list({\n        q: query,\n        category,\n        offset,\n        limit: config.PAGE_SIZE\n      });\n      const chunk = res.items || [];\n      setItems(prev => [...prev, ...chunk]);\n      setOffset(prev => prev + chunk.length);\n      setHasMore(Boolean(res.hasMore));\n    } catch (e) {\n      setHasMore(false);\n    } finally {\n      setLoading(false);\n    }\n  }, [query, category, offset, loading, hasMore]);\n  useEffect(() => {\n    setItems([]);\n    setOffset(0);\n    setHasMore(true);\n  }, [query, category]);\n  useEffect(() => {\n    load();\n  }, [load]);\n  return _jsxDEV(View, {\n    style: [styles.container, {\n      backgroundColor: colors.background\n    }],\n    children: [_jsxDEV(Text, {\n      style: [styles.count, {\n        color: colors.muted\n      }],\n      children: [items.length, \" \", t('results')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), _jsxDEV(FlatList, {\n      data: items,\n      keyExtractor: c => c.id,\n      renderItem: ({\n        item: c\n      }) => _jsxDEV(CourseCardVertical, {\n        course: c,\n        onPress: () => navigation.navigate('CourseDetails', {\n          courseId: c.id\n        }),\n        showBookmark: true\n      }, c.id + '-res', false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this),\n      onEndReached: hasMore ? load : undefined,\n      onEndReachedThreshold: 0.4,\n      ListFooterComponent: loading ? null : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    padding: 20,\n    flex: 1\n  },\n  count: {\n    color: theme.colors.muted\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useCallback","View","Text","StyleSheet","FlatList","theme","useColors","t","CourseCardVertical","CoursesAPI","config","jsxDEV","_jsxDEV","SearchResultsScreen","route","navigation","colors","query","params","category","items","setItems","offset","setOffset","hasMore","setHasMore","loading","setLoading","load","res","list","q","limit","PAGE_SIZE","chunk","prev","length","Boolean","e","style","styles","container","backgroundColor","background","children","count","color","muted","fileName","_jsxFileName","lineNumber","columnNumber","data","keyExtractor","c","id","renderItem","item","course","onPress","navigate","courseId","showBookmark","onEndReached","undefined","onEndReachedThreshold","ListFooterComponent","create","padding","flex"],"sources":["/Users/mahmoudessam/Desktop/Qotoz/native-progect/e-learning-native/src/screens/SearchResultsScreen.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { View, Text, StyleSheet, FlatList } from 'react-native';\nimport theme from '../theme';\nimport { useColors } from '../theme/hooks';\nimport { t } from '../i18n';\nimport { CourseCardVertical } from '../components/CourseCard';\nimport { CoursesAPI } from '../services/api';\nimport config from '../config';\n\nexport default function SearchResultsScreen({ route, navigation }) {\n  const colors = useColors();\n  const query = route?.params?.query || '';\n  const category = route?.params?.category || '';\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const load = useCallback(async () => {\n    if (loading || !hasMore) return;\n    setLoading(true);\n    try {\n      const res = await CoursesAPI.list({ q: query, category, offset, limit: config.PAGE_SIZE });\n      const chunk = res.items || [];\n      setItems((prev) => [...prev, ...chunk]);\n      setOffset((prev) => prev + chunk.length);\n      setHasMore(Boolean(res.hasMore));\n    } catch (e) {\n      setHasMore(false);\n    } finally {\n      setLoading(false);\n    }\n  }, [query, category, offset, loading, hasMore]);\n\n  useEffect(() => {\n    // Reset when query changes\n    setItems([]);\n    setOffset(0);\n    setHasMore(true);\n  }, [query, category]);\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}> \n      <Text style={[styles.count, { color: colors.muted }]}>{items.length} {t('results')}</Text>\n      <FlatList\n        data={items}\n        keyExtractor={(c) => c.id}\n        renderItem={({ item: c }) => (\n          <CourseCardVertical key={c.id + '-res'} course={c} onPress={() => navigation.navigate('CourseDetails', { courseId: c.id })} showBookmark />\n        )}\n        onEndReached={hasMore ? load : undefined}\n        onEndReachedThreshold={0.4}\n        ListFooterComponent={loading ? null : null}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { padding: 20, flex: 1 },\n  count: { color: theme.colors.muted },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}